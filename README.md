# next-spotify-v2

> **Disclaimer**: I am currently building a more advanced project — **[Betterlist](https://github.com/ankitk26/betterlist)** — designed for managing Spotify playlists with ease. Check it out for a more refined experience.

<img src="https://images.unsplash.com/photo-1567535343163-9bba0f61bd09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="sample intro image" width="700" />

<small>Source: [Agê Barros](https://unsplash.com/photos/fK8n4RwGuEI)</small>

<br>

next-spotify-v2 is a simple project built with **React 19** and **Next.js 16** that fetches and displays data from the Spotify Web API. It uses **Better Auth** for login and **Drizzle ORM** for basic data handling.

> **Note**: Currently, users cannot log in to the demo link due to Spotify's API Developer quota limits. The application is intended for local development and testing.
>
> **Working Demo**: [Vercel Link](https://next-spotify-smoky-v2.vercel.app)

---

## Table of Contents

- [Technologies and Libraries](#technologies)
- [Features](#features)
- [Local Development](#run_locally)
- [Configuration](#env)
- [API and Resources](#resources)
- [TODO List](#todo)

---

## Technologies and Libraries

### Core Frameworks

- **Framework**: [Next.js 16 (App Router)](https://nextjs.org/)
- **Library**: [React 19](https://react.dev/)
- **Language**: [TypeScript](https://www.typescriptlang.org/)

### Backend and Auth

- **Authentication**: [Better Auth](https://www.better-auth.com/)
- **Database ORM**: [Drizzle ORM](https://orm.drizzle.team/)
- **Database**: [Postgres](https://postgresjs.org/) - Neon provider

### State and Data Management

- **Data Fetching**: [TanStack Query v5](https://tanstack.com/query/latest)
- **Client State**: [Zustand](https://zustand-demo.pmnd.rs/)

### Styling and Tooling

- **Styling**: [Tailwind CSS v4](https://tailwindcss.com/)
- **Linting and Formatting**: [Biome](https://biomejs.dev/)
- **Icons**: [Lucide Icons](https://lucide.dev/)

---

## Features

- **Login**: Authenticate with a Spotify account via Better Auth.
- **Data Display**: Fetches and lists top tracks, artists, and recently played tracks from the Spotify API.
- **Library View**: Displays your playlists, liked songs, followed artists, and albums.

---

## Local Development

Since Spotify's Redirect URIs often require HTTPS for authentication, you must use a tunneling service like **ngrok** for the login flow to work locally.

### 1. Clone and Install

```bash
git clone https://github.com/ankitk26/next-spotify-v2.git
cd next-spotify-v2
npm install
```

### 2. Database and Execution

Push the database schema to your Postgres instance and start the server:

```bash
# Push schema
npx drizzle-kit push

# Run application
npm run dev
```

### 3. Setup Tunneling (Required)

1. Install [ngrok](https://ngrok.com/download) and authenticate it.
2. Create a tunnel for your local server:
   ```bash
   ngrok http 3000
   ```
3. Copy the `Forwarding` URL (e.g., `https://your-tunnel-id.ngrok-free.app`).

---

## Configuration

Add the following environment variables to your `.env` file. Replace `<YOUR_NGROK_URL>` with the URL generated by ngrok.

### Environment Variables

```text
DATABASE_URL=your_postgres_connection_string
SPOTIFY_CLIENT_ID=your_spotify_client_id
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret
BETTER_AUTH_SECRET=your_generated_secret
BETTER_AUTH_URL=<YOUR_NGROK_URL>
```

### Spotify Dashboard Setup

1. Go to the [Spotify Developer Dashboard](https://developer.spotify.com/dashboard/).
2. Create an application to get your **Client ID** and **Client Secret**.
3. Under **Edit Settings**, add the following **Redirect URI**:
   `<YOUR_NGROK_URL>/api/auth/callback/spotify`

---

## API and Resources

- **Spotify API**: [Web API Documentation](https://developer.spotify.com/documentation/web-api)
- **Authentication**: [Better Auth Documentation](https://www.better-auth.com/docs/introduction)
- **Database**: [Drizzle ORM Documentation](https://orm.drizzle.team/docs/overview)
- **Data Fetching**: [TanStack Query Docs](https://tanstack.com/query/v5/docs/framework/react/overview)
- **Typography**: [Montserrat Font](https://fonts.google.com/specimen/Montserrat)

---

## TODO List

- [ ] **Dynamic Theming**: Basic color extraction from album art.
- [ ] **Error Handling**: Basic boundaries for API rate limits.
